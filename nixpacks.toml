# Nixpacks configuration for Dokploy deployment
# This file helps Dokploy build the application correctly

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "npm install --legacy-peer-deps",
  "npm install --save-optional @oxc-parser/binding-linux-x64-gnu @oxc-transform/binding-linux-x64-gnu || echo 'Optional bindings already installed or not needed'"
]

[phases.build]
cmds = ["npm run build"]

[start]
cmd = "npm run start"

