# Nixpacks configuration for Dokploy deployment
# This file helps Dokploy build the application correctly
# Using Bun for faster installs and better performance

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "curl -fsSL https://bun.sh/install | bash",
  "source $HOME/.bashrc || true",
  "export PATH=\"$HOME/.bun/bin:$PATH\"",
  "bun install --frozen-lockfile"
]

[phases.build]
cmds = [
  "export PATH=\"$HOME/.bun/bin:$PATH\"",
  "bun run build"
]

[start]
cmd = "export PATH=\"$HOME/.bun/bin:$PATH\" && bun run start"

